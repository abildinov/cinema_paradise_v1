<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Storage - Cinema API</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #111; 
            color: white; 
            text-align: center;
        }
        .container { 
            max-width: 600px; 
            margin: 50px auto; 
            padding: 30px; 
            background: #222; 
            border-radius: 10px;
        }
        button { 
            padding: 15px 30px; 
            margin: 10px; 
            cursor: pointer; 
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
        .clear-btn { background: #dc3545; color: white; }
        .back-btn { background: #28a745; color: white; }
        .status { 
            margin: 20px 0; 
            padding: 15px; 
            border-radius: 5px; 
            background: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ Cinema API - Storage Manager</h1>
        
        <div class="status" id="status">
            <h3>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ localStorage:</h3>
            <div id="storage-content"></div>
        </div>
        
        <button class="clear-btn" onclick="clearStorage()">
            üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
        </button>
        
        <button class="back-btn" onclick="goHome()">
            üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
        </button>
        
        <hr style="margin: 30px 0;">
        
        <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:</h3>
        <button onclick="clearAuth()" style="background: #ffc107; color: black;">
            üîì –û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        </button>
        
        <button onclick="setTestUser()" style="background: #17a2b8; color: white;">
            üë§ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        </button>
    </div>

    <script>
        function updateStatus() {
            const content = document.getElementById('storage-content');
            const keys = Object.keys(localStorage);
            
            if (keys.length === 0) {
                content.innerHTML = '<em style="color: #28a745;">localStorage –ø—É—Å—Ç ‚úÖ</em>';
            } else {
                let html = '<ul style="text-align: left; max-width: 400px; margin: 0 auto;">';
                keys.forEach(key => {
                    const value = localStorage.getItem(key);
                    html += `<li><strong>${key}:</strong> ${value.substring(0, 50)}${value.length > 50 ? '...' : ''}</li>`;
                });
                html += '</ul>';
                content.innerHTML = html;
            }
        }
        
        function clearStorage() {
            localStorage.clear();
            alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!');
            updateStatus();
        }
        
        function clearAuth() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            alert('–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—á–∏—â–µ–Ω—ã!');
            updateStatus();
        }
        
        function setTestUser() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–µ–π–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            localStorage.setItem('user', JSON.stringify({
                id: 1,
                username: 'testuser',
                role: 'customer',
                first_name: '–¢–µ—Å—Ç',
                last_name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
            }));
            localStorage.setItem('token', 'fake-test-token-123');
            alert('–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞)!');
            updateStatus();
        }
        
        function goHome() {
            window.location.href = '/';
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateStatus();
        
        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        setInterval(updateStatus, 2000);
    </script>
</body>
</html>